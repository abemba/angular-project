<ng-container [ngSwitch]="state">
    <ng-container *ngSwitchCase="'send'">
        <ng-container *ngTemplateOutlet="send"></ng-container>
    </ng-container>

    <ng-container *ngSwitchCase="'sendconfirm'">
        <ng-container *ngTemplateOutlet="sendconfirm"></ng-container>
    </ng-container>

    <ng-container *ngSwitchCase="'sendsuccess'">
        <ng-container *ngTemplateOutlet="sendsuccess"></ng-container>
    </ng-container>

    <ng-container *ngSwitchCase="'sendfailed'">
        <ng-container *ngTemplateOutlet="sendfailed"></ng-container>
    </ng-container>

    <ng-container *ngSwitchCase="'methodnotavailable'">
        <ng-container *ngTemplateOutlet="methodnotavailable"></ng-container>
    </ng-container>
</ng-container>



<ng-template #send>
    <div style="text-align: center" class="mt-5">
        <span style="max-width: 80px; display: inline-block">
            <img src="assets/images/interac-email-transfer-logo.png" class="img-fluid">
        </span>
    </div>
    <div>
        <div class="form-group">
            <label>Amount</label>
            <input class="form-control" type="number" name="amount" step=".01" min="0.01">
        </div>
        <div class="form-group">
            <label>Contacts</label>
            <select class="form-control" name="transfer_out_item_id" id="emt_list" [disabled]="new_contact">
                <option *ngFor="let item of existing_contacts; let i=index" value="{{i}}">{{item.name}} - {{item.email}}</option>
            </select>
            <br>
            <label>
                <input type="checkbox" [(ngModel)]="new_contact" > New contact
            </label>
        </div>
        <ng-container *ngIf="new_contact || existing_contacts.length==0">
            <div class="form-group">
                <label>Name</label>
                <input class="form-control" type="text" />
            </div>
            <div class="form-group">
                <label>Email</label>
                <input class="form-control" type="email" />
            </div>
        </ng-container>
        <div class="list-group">
            <div class="list-group-item d-flex justify-content-between"> <span>Question</span> {{default_challenge}}</div>
            <div class="list-group-item d-flex justify-content-between"> <span>Response</span> {{default_response}}</div>
        </div>
        <button class="form-control btn btn-warning" (click)="onClickUpdateState('sendconfirm')">Send</button>
    </div>
</ng-template>

<ng-template #sendconfirm>
    <h3 class="text-center">Confirm Transaction</h3>
    <div class="list-group">
        <div class="list-group-item d-flex justify-content-between"><span>Amount</span> <span>$100.00</span></div>
        <div class="list-group-item d-flex justify-content-between"><span>Name</span> <span>Jon Doe</span></div>
        <div class="list-group-item d-flex justify-content-between"><span>Email</span> <span>j.doe@example.com</span></div>
        <div class="list-group-item d-flex justify-content-between"><span>Question</span> <span>algofame</span></div>
        <div class="list-group-item d-flex justify-content-between"><span>Response</span> <span>algofame</span></div>
        <div style="font-size: 14px;">*You will need provide question/response to the recipient if they do not have autodeposit registered to this email.</div>
    </div>
    <button mat-flat-button class="form-control" color="accent" (click)="onClickUpdateState('sendsuccess')">confirm</button>
</ng-template>

<ng-template #sendsuccess>
    <div class="text-center mt-3">
        <span class="mdi mdi-48px mdi-check-circle-outline text-success"></span>
        <p class="mt-3">
            Success.<br>
            Your confirmation number is <strong>123451</strong>
        </p>
        <button class="mt-3" mat-flat-button color="accent" (click)="onClickUpdateState('sendfailed')">continue</button>
    </div>
</ng-template>

<ng-template #sendfailed>
    <div class="text-center mt-3">
        <span class="mdi mdi-48px mdi-emoticon-confused-outline text-danger"></span>
        <p class="mt-3">The system has experience a critical error. Please try again later or contact us.</p>
        <button class="mt-3" mat-flat-button color="accent" (click)="onClickUpdateState('methodnotavailable')">try again</button>
    </div>
</ng-template>

<ng-template #methodnotavailable>
    <div class="text-center mt-5">
        <span style="max-width: 80px; display: inline-block">
            <span class="mdi mdi-close-octagon-outline mdi-48px text-warning"></span>
        </span>
            <p class="text-center mt-3" style="font-weight: 100">This method is currently not available.</p>
        </div>
</ng-template>