<div class="d-flex justify-content-center">
    <div style="max-width: 600px; width:100%">
        <ng-container [ngSwitch]="state">
                <ng-container *ngSwitchCase="'nobank'" >
                    <ng-container *ngTemplateOutlet="nobank"></ng-container>
                </ng-container>
                
                <ng-container *ngSwitchCase="'addbank'" >
                    <ng-container *ngTemplateOutlet="addbank"></ng-container>
            </ng-container>
            
            <ng-container *ngSwitchCase="'addbankconfirm'" >
                <ng-container *ngTemplateOutlet="addbankconfirm"></ng-container>
            </ng-container>
            
            <ng-container *ngSwitchCase="'addbanksuccess'" >
                <ng-container *ngTemplateOutlet="addbanksuccess"></ng-container>
            </ng-container>
            
            <ng-container *ngSwitchCase="'chargebank'" >
                <ng-container *ngTemplateOutlet="chargebank"></ng-container>
            </ng-container>
            
            <ng-container *ngSwitchCase="'chargebanksuccess'" >
                <ng-container *ngTemplateOutlet="chargebanksuccess"></ng-container>
            </ng-container>
            
            <ng-container *ngSwitchCase="'chargebankconfirm'" >
                <ng-container *ngTemplateOutlet="chargebankconfirm"></ng-container>
            </ng-container>
        </ng-container>
    </div>
</div>

<ng-template #nobank>
    <div class="text-center">
        <p>You have 0 bank accounts linked.</p>
        <button class="btn btn-warning" (click)="updateState('addbank')" >+ Add Account </button>
    </div>
</ng-template>

<ng-template #addbank>
    <form method="POST">
        <h5 class="mb-4">Add Bank Account</h5>
        <div>
            <div class="form-group mt-3">
                <label>First Name</label>
                <input class="form-control"  type="text" name="first_name">
            </div>
            <div class="form-group mt-3">
                <label>Last Name</label>
                <input class="form-control"  type="text" name="last_name">
            </div>
            <div class="form-group mt-5">
                <label>Bank Number</label>
                <input class="form-control"  type="number" name="bank_number">
            </div>
            <div class="form-group mt-2">
                <label>Branch Number</label>
                <input class="form-control"  type="number" name="branch_number">
            </div>
            <div class="form-group mt-2">
                <label>Account Number</label>
                <input class="form-control" type="number" name="account_number">
            </div>
            <button class="form-control btn btn-warning mb-5 mt-5" (click)="updateState('addbankconfirm')">+ Add</button>
        </div>
    </form>
</ng-template>

<ng-template #addbankconfirm>
    <h4 class="mt-4 mb-4" >Confirm Bank Account</h4>
    <div class="list-group">
        <div class="list-group-item d-flex justify-content-between">
            <span>First Name</span>
            <span>John</span>
        </div>
        <div class="list-group-item d-flex justify-content-between">
            <span>Last Name</span>
            <span>Doe</span>
        </div>
        <div class="list-group-item d-flex justify-content-between">
            <span>Bank Number</span>
            <span>123</span>
        </div>
        <div class="list-group-item d-flex justify-content-between">
            <span>Branch Number</span>
            <span>12345</span>
        </div>
        <div class="list-group-item d-flex justify-content-between">
            <span>Account Number</span>
            <span>1111111111</span>
        </div>
        <button class="form-control btn btn-warning mb-5 mt-5" (click)="updateState('addbanksuccess')">confirm</button>
    </div>
</ng-template>

<ng-template #addbanksuccess>
    <div class="text-center">
        <span class="mdi mdi-bank-check mdi-48px text-success"></span>
        <p><strong>Bank account was linked successfully.</strong></p>
        <button class="btn btn-warning" (click)="updateState('chargebank')">continue</button>
    </div>
</ng-template>



<ng-template #chargebanksuccess>
    <div class="text-center">
        <span class="mdi mdi-check-circle-outline mdi-48px text-success"></span>
        <h6>Success</h6>
        <p>The transfer was successfully schedulled.</p>
        <div style="text-align: right" class="mt-3">
            <button class="btn btn-warning form-control mt-5 mb-5" type="submit" form="form1" (click)="updateState('chargebank')">continue</button>
        </div>
    </div>
</ng-template>

<ng-template #chargebankconfirm>
    <h5 class="text-center">Confirm Transaction</h5>
    <div class="list-group mt-3">
        <div class="list-group-item d-flex justify-content-between">From <strong>{{transfer_source}}</strong></div>
        <div class="list-group-item d-flex justify-content-between">To <strong>{{transfer_destination}}</strong></div>
        <div class="list-group-item d-flex justify-content-between">Amount <strong>{{transfer_amount | currency}}</strong></div>
        <div class="list-group-item d-flex justify-content-between">Processing fee <strong>${{transfer_fee | currency}}</strong></div>
        <div class="list-group-item d-flex justify-content-between">Total <strong>${{total_charge}}</strong></div>
        <div *ngIf="recurring" class="list-group-item d-flex justify-content-between">Frequency
            <strong>{{recurring_frequency}}</strong>
        </div>
        <div *ngIf="recurring"  class="list-group-item d-flex justify-content-between">Start date <strong>{{ recurring_start |date:'mediumDate'}}</strong></div>
    </div>
    <div style="text-align: right" class="mt-3">
        <button class="btn btn-success form-control mb-5 mt-5" type="submit" form="form1" (click)="updateState('chargebanksuccess')">confirm</button>
    </div>
</ng-template>

<ng-template #chargebank>
    <div class="form-group">
        <label>Amount</label>
        <br>
        <input class="form-control" type="number" name="amount">
    </div>
    <div class="form-group">
        <br>
        <label>Select account</label>
        <br>
        <div *ngFor="let bank of bank_list; let i = index" class="form-check">
            <input [checked]="i==1" class="form-check-input" type="radio" name="select_account" id="bank_{{i}}" />
            <label class="form-check-label" for="bank_{{i}}">
                {{bank.label}} - {{bank.branch_number}} - {{bank.account_number}}
            </label>
        </div>
        <button mat-flat-button (click)="updateState('addbank')">+ Add Account</button>
    </div>
    <div class="mt-4">
        <div class="form-check">
            <input id="recurringToggle" class="form-check-input" type="checkbox" value="1" [(ngModel)]="recurring" name="recurring">
            <label class="form-check-label" for="recurringToggle">
                Recurring
            </label>
        </div>
        <ng-container *ngIf="recurring" >
            <label>Start Date</label>
            <div class="input-group">
                <input class="form-control" type="text" name="start_date" id="datepicker" autocomplete="off">
                <div class="input-group-append">
                    <button disabled class="btn btn-outline-secondary"><i class="fas fa-calendar"></i></button>
                </div>
            </div>
            <br>
            <label>Frequency</label>
            <select class="form-select" aria-label="Recurring frequency" name="frequency">
                <option value="30" selected>Monthly</option>
                <option value="14">Bi-weekly</option>
                <option value="7">Weekly</option>
                <option value="1">Daily</option>
            </select>
        </ng-container>
    </div>
    <div style="text-align: right">
        <button id="addFromCard" class="btn btn-warning mt-5 mb-5 form-control" type="submit" (click)="updateState('chargebankconfirm')">continue</button>
    </div>
</ng-template>